# Stress Test: Member Claim Collision
# Goal: Test concurrent member claiming scenarios
#
# Run with: maestro test .maestro/stress/member-claim-collision.yaml

appId: host.exp.Exponent

---

# Step 1: Open app and navigate to home screen
- runFlow: ../flows/open-app.yaml

# Step 2: Create a group
- tapOn:
    text: "Create.*Group"
    optional: true

- tapOn:
    text: "\\+"
    optional: true

- assertVisible: "Group Name"

- tapOn:
    text: "e.g., Vacation 2025, Roommates"
- eraseText: 50
- inputText: "Claim Collision Test"
- pressKey: Enter

- pressKey: Enter
- tapOn: "ðŸ’°"
- tapOn: "Create Group"

- extendedWaitUntil:
    visible: "Claim Collision Test"
    timeout: 10000

- tapOn:
    text: "Dismiss"
    optional: true

# Step 3: Add members
- tapOn: "Add"
- tapOn:
    text: "Enter member's name"
- inputText: "Alice"
- pressKey: Enter
- tapOn: "Add Member"

- extendedWaitUntil:
    visible: "Claim Collision Test"
    timeout: 5000

- tapOn: "Add"
- tapOn:
    text: "Enter member's name"
- inputText: "Bob"
- pressKey: Enter
- tapOn: "Add Member"

- extendedWaitUntil:
    visible: "Claim Collision Test"
    timeout: 5000

# Verify members
- assertVisible: "Alice"
- assertVisible: "Bob"

# Try to claim "This is me" if available
- tapOn:
    text: "This is me"
    optional: true

# Success
